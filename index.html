<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0,
    maximum-scale=1.0, user-scalable=no"/>
    <title>åœ£è¯èŠ‚å•¦</title>
</head>
<body>

<h2 style="text-align: center; width: auto">å¤§å…”å…”ğŸ°ç‰Œæ¯”ä¾‹å°ºè½¬æ¢å™¨</h2>

<hr/>

<img align="center" src="christmas.jpg" width="100%">

<hr/>

<p>è¯·æˆ‘çš„å¤§å®è´è¾“å…¥æ¯”ä¾‹å°ºâ¤ï¸ï¼š</p>

<form style="text-align: center">
    <fieldset>
        <legend>æ¯”ä¾‹å°º</legend>
        <input type="text" id="numerator" name="numerator" value="1" size="10%" readonly>
        :
        <input type="text" id="denominator" name="denominator" value="1" size="10%" pattern="[0-9]*">
    </fieldset>
</form>

<br/>
<hr/>

<p>è¯·æˆ‘çš„å¤§å®è´è¾“å…¥é•¿åº¦å¹¶é€‰æ‹©è½¬æ¢çš„å•ä½ğŸ˜™ï¼š</p>
<form style="text-align: center">
    åŸæ¥çš„é•¿åº¦ï¼š
    <input type="text" id="originalLength" name="originalLength" size="10%">
    <select id="unitOriginal" name="unitOriginal">
        <option value="mm">æ¯«ç±³</option>
        <option value="cm">å˜ç±³</option>
        <option value="m" selected>ç±³</option>
        <option value="km">åƒç±³</option>
    </select>
    <br/>
    å›¾ä¸Šçš„é•¿åº¦ï¼š
    <input type="text" id="newLength" name="newLength" size="10%">
    <select id="unitNew" name="unitNew">
        <option value="mm">æ¯«ç±³</option>
        <option value="cm" selected>å˜ç±³</option>
        <option value="m">ç±³</option>
    </select>
</form>

<br/>
<div style="text-align: center">
    <button name="originalToPaper" onclick="originalToPaper()">åŸæ¥â¡ï¸å›¾ä¸Š</button>
    <button name="paperToOriginal" onclick="paperToOriginal()">å›¾ä¸Šâ¡ï¸åŸæ¥</button>
    <button name="calculateRate" onclick="calculateRate()">è®¡ç®—æ¯”ä¾‹å°º</button>
    <button name="clearInputBox" onclick="clearInputBox()">æ¸…ç©ºè¾“å…¥æ¡†</button>
</div>


<script>
    function clearInputBox() {
        document.getElementById("originalLength").value = "";
        document.getElementById("newLength").value = "";
    }

    function calculateRate() {
        let originalLength = document.getElementById("originalLength").value;
        originalLength = otherUnitToMeter(originalLength, "unitOriginal");
        let newLength = document.getElementById("newLength").value;
        newLength = otherUnitToMeter(newLength, "unitNew");
        if (originalLength && newLength) {
            document.getElementById("denominator").value = (originalLength / newLength).toFixed(2);
        } else {
            alert("è¯·æˆ‘çš„å¤§å®è´çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰æ¼å¡«æ•°æ®å“¦!")
        }
    }

    function paperToOriginal() {
        let lengthMeter = 0;
        let newLength = document.getElementById("newLength").value;
        let scaleRate = document.getElementById("denominator").value;
        let lengthMeterOriginalScale;
        let lengthOriginal;
        newLength = Number(newLength);
        scaleRate = Number(scaleRate);
        lengthMeter = otherUnitToMeter(newLength, "unitNew");
        lengthMeterOriginalScale = lengthMeter * scaleRate;
        lengthOriginal = meterToOtherUnit(lengthMeterOriginalScale, "unitOriginal");
        if (lengthOriginal) {
            document.getElementById("originalLength").value = lengthOriginal.toFixed(3);
        } else {
            alert("è¯·æˆ‘çš„å¤§å®è´çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¾“é”™å“¦ï¼ï¼ï¼");
        }
    }

    function originalToPaper() {
        let lengthMeter = 0;
        let originalLength = document.getElementById("originalLength").value;
        let scaleRate = document.getElementById("denominator").value;
        let lengthMeterNewScale;
        let lengthPaper;
        originalLength = Number(originalLength);
        scaleRate = Number(scaleRate);
        lengthMeter = otherUnitToMeter(originalLength, "unitOriginal");
        lengthMeterNewScale = lengthMeterToNewScale(lengthMeter, scaleRate);
        lengthPaper = meterToOtherUnit(lengthMeterNewScale, "unitNew");
        if (lengthPaper) {
            document.getElementById("newLength").value = lengthPaper.toFixed(3);
        } else {
            alert("è¯·æˆ‘çš„å¤§å®è´çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¾“é”™å“¦ï¼ï¼ï¼");
        }
    }

    function lengthMeterToNewScale(lengthMeter, scaleRate) {
        return lengthMeter / scaleRate;
    }

    function meterToOtherUnit(lengthMeterNewScale, select) {
        let newUnit = getSelectedValue(select);
        if (newUnit === "km") {
            return lengthMeterNewScale / 1000;
        } else if (newUnit === "m") {
            return lengthMeterNewScale;
        } else if (newUnit === "cm") {
            return lengthMeterNewScale * 100;
        } else if (newUnit === "mm") {
            return lengthMeterNewScale * 1000;
        }
    }

    function otherUnitToMeter(originalLength, select) {
        let originalUnit = getSelectedValue(select);
        if (originalUnit === "km") {
            return originalLength * 1000;
        } else if (originalUnit === "m") {
            return originalLength;
        } else if (originalUnit === "cm") {
            return originalLength / 100;
        } else if (originalUnit === "mm") {
            return originalLength / 1000;
        }
    }

    function getSelectedValue(select) {
        let text;
        let i;
        let obj = document.getElementById(select);
        for (i = 0; i < obj.length; i++) {
            if (obj[i].selected) {
                text = obj[i].value;
                return text;
            }
        }
    }

</script>
</body>
</html>